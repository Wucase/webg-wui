# 时间转换

```javascript


export function timeService(timer, noSeconds, simplyTime) {
  // 处理后端时间：2021-11-02 15:04:54.903
  if (typeof timer === "string" && timer.indexOf(".") > -1) {
    let result = timer.split(".")
    if (timer.indexOf("Z") > -1) {
      timer = result[0] + "Z"
    } else {
      timer = result[0]
    }
  }
  var regex = /^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/
  if (regex.test(timer)) return timer //已格式化 不再执行此方法
  if (timer === "--" || !timer) {
    return "--"
  }
  // if (typeof timer === "string" && timer.indexOf(".") > -1) return timer;
  if (typeof timer === "string" && timer.indexOf("T") > -1) {
    // return timer.replace(/[A-Z]/g, ' ')
    return formteTimeHasT(timer)
  }
  if (typeof timer === "string" && timer.indexOf("T") === -1) {
    if (timer.length === 10) {
      // 如果为10位
      timer = timer * 1000
    } else {
      // 如果时间戳为13位
      timer = timer - 0
    }
  } else {
    // number类型
    if (timer.toString().length === 10) timer = timer * 1000
  }

  var time
  let date = new Date(timer)
  // console.log(date, 'date')
  let year = date.getFullYear()
  let month = date.getMonth() + 1
  let day = date.getDate()
  let hour = date.getHours()
  let minutes = date.getMinutes()
  let seconds = date.getSeconds()

  month = month < 10 ? "0" + month : month
  day = day < 10 ? "0" + day : day
  hour = hour < 10 ? "0" + hour : hour
  minutes = minutes < 10 ? "0" + minutes : minutes
  seconds = seconds < 10 ? "0" + seconds : seconds

  if (noSeconds) {
    time =
      year +
      "-" +
      month +
      "-" +
      day +
      " " +
      hour +
      ":" +
      minutes +
      ":" +
      seconds
    return time
  }
  if (simplyTime) {
    time = year + "-" + month + "-" + day
    return time
  }
  time =
    year + "-" + month + "-" + day + " " + hour + ":" + minutes + ":" + seconds
  return time
}



//处理带T的时间格式
export function formteTimeHasT(date) {
  var newDate = new Date(date).toJSON()

  return new Date(+new Date(newDate) + 8 * 3600 * 1000)
    .toISOString()
    .replace(/T/g, " ")
    .replace(/\.[\d]{3}Z/, "")
}

```